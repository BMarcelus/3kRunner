<canvas width=680 height=450>
<script>
try{A=webkitAudioContext}catch(e){A=AudioContext}A=new A();
function P(f){o=A.createOscillator();T=A.currentTime;o.connect(A.destination);o.start(0);o.stop(T+.07);o.type="square";o.volume=.5;
o.frequency.setValueAtTime(f,T+.03);
};
c=document.querySelector('canvas').getContext('2d');
c.font="20px Arial";
X=200;
Y=100;
vy=g=k=d=t=f=S=V=h=x=G=F=N=D=Z=0;L='#000';Q=1;
p=[];
r=Math.random;
y=250;
B="#000";W='#fff';
E=.8;
function l(a,b){p.push(a),b||r()>E&&H()};
function n(){r()<.5?(u(),u(1)):r()<.5?v():y=(y+=(.5-r())*190)<150?150:y>400?400:y,l([x+=(r()+1)*160,y,100,10])};
function u(d){l([x+=100,y,100,19-d||9])};
function H(){l([x+r()*79,y-20-r()*120,20,20],1)};
function v(){l([x+=200,y-=120,50,100],1);l([x-100,y+=120,250,11])}
C=(L)=>{c.fillStyle=L};
c.T=c.fillText;
c.R=c.fillRect;
R=(x,y,w,H)=>x+w>=X&&x<X+30&&y+H>=Y+h&&y<=Y+30;
function q(i,j,w,h,e) {
w-2&&t&&R(i,j,w,h)&&(w-20?vy>=0&&Y<=j?(Y=j-30,g=vy=0,h-18||(V=10)):K():(f+=30,e[2]=2,P(880+440*(1-E)),G=F+3,E*=.992));
w-2?w-20?c.fillRect(x=i,j,w,h):c.T('<3',i,j+20):(c.T('+30',i,j),e[1]-=2);
}
function s() {
F++;
F%99||t||(Z=(Z+1)%Q);
D?C('#faa'):C(W);
c.R(0,0,680,450);
C(L);
g=g||vy>2; 
t&&(vy+=[.4,.3,.3][Z]);
Y+=vy;
c.T(f,100,50);
c.T(S,580,50);
m=k*(vy>=0);
z=' '.repeat(20);
c.T('tap:jmp   tapx2:fall   hold:crouch', 200,20);
c.R(200+(m?200:g*85),30,70,4);
h+=m*7-h/2;
V+=([5,3,4][Z]-V)/20;
z=V*!D-(Z-2?0:-vy)
p.forEach(e=>{q(e[0]-=z,e[1]+Math.cos(e[0]/100)*10,e[2],e[3],e)});
x<=680&&n();
p[0][0]<-p[0][2]&&p.shift();
C(["#d26","#2a7","#62d"][Z])
f>3000&&C("gold");
c.fillRect(X-vy/4,Y+h-(z==2?5:0),(Z==2?32:30)+vy/2,(z==1?35:30)-h);
c.T(['M','▮▮','>FF'][Z], X-3-vy/4,Y+10+h);
vy<-5&&c.T(`Ɛ>${' '.repeat(F-2)}<3`,X+20-F*V,J);
C('#fff');
z=['-','.','v'][Z];
c.T(k||D?`>${z}<`:`^${z}^`, X+5,Y+20+vy+h/2);
Y>450&&(Y=420,K());
z=f<3000;
D&&(c.R(220+220/F,50,200,240),C(B),
c.T(z?'don get<3k <3':(F%10>5?'u got >3k <3!':''),250+220/F,130),
c.T(z?`u got ${f} <3`:'YAY u win',240+220/F,90),
F>40&&c.T(`HS: ${ S=f>S?f:S} <3`,240+220/F,170),
F%50>25&&c.T('get mor <3?',270+220/F,220),
N&&F%25>10&&c.T('*New Char Unlocked!',250,350),
F%7||F>10&&F<44&&((z&&!N)?P(880-F*F):P(880+F*F)));
F==G&&(P(1200),G=0);
window.requestAnimationFrame(s);
}
s();
function K(){t=vy=g=F=0,D=1,P(220),L=W,E=.8;f>500&&Q<2&&(N=Q=2),f>1000&&Q<3&&(N=Q=3)}
function a(e) {
e.metaKey||e.preventDefault();
!D?(k||P(880-g*330-Y )||(g&&(vy+=10))||(J=Y+20,vy=-10,f+=!g*5,Z-1||(V=10)),L='#a00',t||(f=N=0),(F=t=k=g=1)):F>50?(D=0,Y=100):F+=10;
}
function b() {
k=0,vy=vy/2;
D||(L=B);
}
w=addEventListener.bind(window);
w('keydown',a);
w('keyup',b);
w('touchstart',a);
w('touchend',b);
</script>